<h2>User info</h2>
<%= image_tag user.get_profile_image(100, 100) %><br />
<table class="table">
  <tbody>
    <tr></tr>
    <tr>
      <th>name</th>
      <th><%= user.name %></th>
    </tr>
    <tr>
      <th>introduction</th>
      <th><%= user.introduction %></th>
    </tr>

    <% if user == current_user %>
      <tr>
        <th>Mail address</th>
        <th><%= user.email %></th>
      </tr>
      <tr>
        <th>post_code</th>
        <th><%= user.postcode %></th>
      </tr>
      <tr>
        <th>address</th>
        <th><%= user.join_address %></th>
      </tr>
    <% end %>

    <tr>
      <th>Map</th>
      <th>
        <script type="text/javascript">
          function initMap() {
            var test ={lat: <%= user.latitude %>, lng: <%= user.longitude %>};
            var map = new google.maps.Map(document.getElementById('map'), {
                      zoom: 15, 
                      center: test
                      });
            var transitLayer = new google.maps.TransitLayer();
            transitLayer.setMap(map);

            var contentString = '住所：<%= user.join_address %>';
            var infowindow = new google.maps.InfoWindow({
              content: contentString
            });
            var marker = new google.maps.Marker({
                          position:test,
                          map: map,
                          title: contentString
                        });

            marker.addListener('click', function() {
              infowindow.open(map, marker);
            });
          }
        </script>

        <script async defer
                      src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=<%= ENV['GOOGLE_API_KEY'] %>&callback=initMap">
        </script>
        <style type="text/css">
          #map { height: 400px;
                width: 100%;}
        </style>

        <div id="map"></div>
      </th>
    </tr>

    <tr>
      <th>follows</th>
      <th><%= link_to user.following_user.count, user_followings_path(user) %></th>
    </tr>
    <tr>
      <th>followers</th>
      <th><%= link_to user.follower_user.count, user_followers_path(user) %></th>
    </tr>
    <tr>
      <th><%= render "relationships/btn", user: user %></th>
      <th colspan='2'></th>
    </tr>
  </tbody>
</table>
<div class="row">
  <%= link_to edit_user_path(user), class: "btn btn-outline-secondary btn-block" do %>
    <i class="fas fa-user-cog"></i>
  <% end %>
</div>
